# get-job-uuid

This action returns the UUID for the current job.

Notably, this UUID is generated by GitHub and can be used to identify the corresponding job record via API calls.

## Usage

```yaml
- uses: jenseng/get-job-uuid@v1
  id: job-uuid
- env:
    uuid: ${{ steps.job-uuid.outputs.uuid }}
  run: |
    echo "job uuid: $uuid"
```

On the API side, this UUID is exposed as the corresponding [check run's `external_id`](https://docs.github.com/en/rest/checks/runs?apiVersion=2022-11-28#get-a-check-run). So to get from the UUID to the job ID, you can do something like the following:

```yaml
- name: Find job id
  shell: bash
  env:
    GITHUB_TOKEN: ${{ github.token }}
  run: |
    # first find the check_suite_id for this run
    check_suite_id="$(gh api "repos/{owner}/{repo}/actions/runs/${GITHUB_RUN_ID}" --jq .check_suite_id)" >> "$GITHUB_OUTPUT"

    # then use the check_suite_id and uuid to find the job id
    # (the check run id _is_ the job id)
    job_id="$(gh api "repos/{owner}/{repo}/check-suites/${check_suite_id}/check-runs" --jq ".check_runs[] | select(.external_id == env.uuid) | .id")"
    echo "::notice::Job ID: ${job_id}"
```

## License

The scripts and documentation in this project are released under the [ISC License](./LICENSE.md)
